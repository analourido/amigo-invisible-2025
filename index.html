<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8">

    <title>Noche de cine ‚ú®</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700;800;900&amp;display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <meta name="theme-color" content="#0b0f1a">
    <link rel="manifest" href="manifest.webmanifest">

    <!-- iOS ‚ÄúPWA mode‚Äù -->
    <meta name="apple-mobile-web-app-title" content="Noche de cine">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    

    <!-- iOS icon -->

    <!-- iOS splash screens (iPhone + iPad, portrait + landscape cuando aplica) -->

    <!-- iPad 12.9" -->

    <!-- iPad 11" -->

    <!-- iPad 10.9" (Air/10th gen) -->

    <!-- iPad 10.2" / 9.7" -->
    <link rel="apple-touch-icon" href="apple-icon-180.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-startup-image" href="apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-1668-2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-2388-1668.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-2048-1536.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-1640-2360.jpg" media="(device-width: 820px) and (device-height: 1180px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-2360-1640.jpg" media="(device-width: 820px) and (device-height: 1180px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-2224-1668.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-1620-2160.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-2160-1620.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-1488-2266.jpg" media="(device-width: 744px) and (device-height: 1133px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-2266-1488.jpg" media="(device-width: 744px) and (device-height: 1133px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-1320-2868.jpg" media="(device-width: 440px) and (device-height: 956px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-2868-1320.jpg" media="(device-width: 440px) and (device-height: 956px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-1206-2622.jpg" media="(device-width: 402px) and (device-height: 874px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-2622-1206.jpg" media="(device-width: 402px) and (device-height: 874px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-1260-2736.jpg" media="(device-width: 420px) and (device-height: 912px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-2736-1260.jpg" media="(device-width: 420px) and (device-height: 912px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-1290-2796.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-2796-1290.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-1179-2556.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-2556-1179.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-1170-2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-2532-1170.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-1284-2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-2778-1284.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-2436-1125.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-1242-2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-2688-1242.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-828-1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-1792-828.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-2208-1242.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-1334-750.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="apple-splash-1136-640.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
  </head>
  <body>
    <main class="wrap">

      <!-- Intro -->
      <section class="intro" id="intro" aria-label="Inicio">
        <div class="introCard">
          <div class="badge">‚ú® La Casita de Silvia</div>
          <h1>Noche de cine</h1>
          <p>
            Toca a Rapunzel para que te hable.<br>
            Luego elige tu peli y‚Ä¶ <strong>best day ever</strong>.
          </p>
          <div class="introActions">
            <button class="primary" id="startBtn">Empezar</button>
            <button class="ghost" id="toggleSoundBtn" aria-pressed="false">Sonido: OFF</button>
          </div>
          <p class="fineprint">Tip: En iPhone el sonido necesita un toque para activarse.</p>
        </div>
      </section>

      <!-- Escena -->
      <section class="scene" id="scene" aria-label="Escena interactiva">
        <div class="fx fx--stars" aria-hidden="true"></div>
        <canvas class="fx fx--particles" id="particles" aria-hidden="true"></canvas>
        <div class="fx fx--vignette" aria-hidden="true"></div>
        <header class="hud">
          <div class="hudLeft">
            <div class="pill">
              <span class="dot"></span>
              <span class="pillTitle">Noche de cine</span>
              <span class="pillProg" id="pillProg" aria-label="Progreso">1/4</span>
            </div>
          </div>
          <div class="hudRight">
            <button class="iconBtn" id="soundBtn" title="Sonido" aria-label="Sonido">üîá</button>
            <button class="iconBtn" id="helpBtn" title="Ayuda" aria-label="Ayuda">?</button>
          </div>
        </header>
        <div class="bg" aria-hidden="true"></div>

        <!-- Rapunzel (2 im√°genes: boca cerrada/abierta) -->
        <button id="rapunzelBtn" class="character" aria-label="Toca a Rapunzel">
          <div class="sprite">
            <img class="rap rap--closed" src="img/rapunzel_closed.png" alt="Rapunzel">
            <img class="rap rap--open" src="img/rapunzel_open.png" alt="" aria-hidden="true">
            <span class="tapPulse" aria-hidden="true"></span>
          </div>
        </button>

        <!-- Bocadillo -->
        <div class="speech hidden" id="speech" role="status" aria-live="polite">
          <div class="speechBubble">
            <div class="speechHeader">
              <span class="name">Rapunzel</span>
              <span class="spark">‚ú®</span>
            </div>
            <p id="bubbleText"></p>
          </div>
        </div>

        <!-- ‚úÖ Picker tipo Tinder (2 cartas apiladas) -->
        <div class="picker hidden" id="picker" role="dialog" aria-modal="true" aria-label="Elige pel√≠cula">
          <div class="pickerCard pickerCard--tinder">
            <div class="pickerTop">
              <h2>Elige la pel√≠cula que quieres ver</h2>
              <button class="iconBtn" id="closePickerBtn" aria-label="Cerrar">‚úï</button>
            </div>
            <div class="cardStack" id="cardStack" aria-label="Carteles">

              <!-- TOP: Enredados -->
              <article class="movieCard is-active" id="cardEnredados" data-movie="tangled" tabindex="0" aria-label="Enredados">
                <img class="moviePoster" src="img/poster-enredados.jpeg" alt="Enredados">
              <!--    <div class="movieOverlay">
                  <div class="movieTitle">Enredados</div>
                  <div class="movieSub">Tu favorita üåû</div>
                </div>-->
                <div class="badgeLike">S√ç ‚úÖ</div>
                <div class="badgeNope">NO ‚ùå</div>
              </article>

              <!-- DEBAJO: Matilda -->
              <article class="movieCard" id="cardMatilda" data-movie="matilda" tabindex="0" aria-label="Matilda">
                <img class="moviePoster" src="img/poster-matilda.jpg" alt="Matilda">
             <!--     <div class="movieOverlay">
                  <div class="movieTitle">Matilda</div>
                  <div class="movieSub">La cl√°sica</div>
                </div> -->
                <div class="badgeLike">S√ç ‚úÖ</div>
                <div class="badgeNope">NO ‚ùå</div>
              </article>
            </div>

            <!-- Acciones (fallback + accesibilidad) -->
            <div class="tinderActions">
              <button class="tinderBtn tinderBtn--nope" id="btnNope" type="button" aria-label="No">
                ‚ùå NO
              </button>
              <button class="tinderBtn tinderBtn--like" id="btnLike" type="button" aria-label="S√≠">
                ‚úÖ S√ç
              </button>
            </div>
            <p class="pickerNote">Desliza: derecha = S√ç, izquierda = NO</p>
          </div>
        </div>

        <!-- ‚úÖ Confirm ‚Äú¬øver Enredados?‚Äù -->
        <div class="confirm hidden" id="confirm" role="dialog" aria-modal="true" aria-label="Confirmaci√≥n">
          <div class="confirmCard">
            <div class="confirmTitle" id="confirmTitle">¬øQuieres ver Enredados ahora? üçø</div>
            <p class="confirmText" id="confirmText">Se abrir√° en una pesta√±a nueva.</p>
            <div class="confirmActions">
              <button class="ghost" id="confirmNo" type="button">No, siguiente</button>
              <button class="primary" id="confirmYes" type="button">S√≠, vamos</button>
            </div>
          </div>
        </div>

        <!-- ‚úÖ Loading mini -->
        <div class="loading hidden" id="loading" aria-live="polite">
          <div class="loadingCard">
            <div class="spinner"></div>
            <div id="loadingText">Abriendo‚Ä¶</div>
          </div>
        </div>

        <!-- Modal ayuda -->
        <div class="modal hidden" id="helpModal" role="dialog" aria-modal="true" aria-label="Ayuda">
          <div class="modalCard">
            <h2>C√≥mo funciona</h2>
            <ol>
              <li>Toca a Rapunzel para que te hable.</li>
              <li>Cuando termine la √∫ltima frase, elige pel√≠cula.</li>
              <li>Si eliges Matilda‚Ä¶ te vacila üòå</li>
            </ol>
            <button class="primary" id="closeHelpBtn">Vale</button>
          </div>
        </div>

        <!-- SFX -->
        <audio id="tapSfx" src="sfx/tap.mp3" preload="auto"></audio>
        <audio id="sparkleSfx" src="sfx/sparkle.mp3" preload="auto"></audio>
        <audio id="snapGood" src="sfx/snap-good.mp3" preload="auto"></audio>
        <audio id="snapBad" src="sfx/snap-bad.mp3" preload="auto"></audio>
      </section>
    </main>
    <script src="app.js"></script>
  </body>
</html>
